{"version":3,"sources":["components/wrapper.js","components/button.js","config.js","pages/start/roomResult.js","pages/start/index.js","pages/meet/index.js","services/userMedia.js","App.js","serviceWorker.js","index.js"],"names":["WrapperStyled","styled","div","Wrapper","children","ButtonStyled","button","props","rounder","success","Button","text","onClick","CONFIG","API_URL","URL","SECRET_KEY","RoomResultStyled","RoomResult","url","useState","copied","setCopied","className","type","disabled","value","document","createElement","setAttribute","body","appendChild","select","execCommand","removeChild","StartStyled","heght","Start","handleClickCreate","state","created","history","push","hash","createHash","setState","height","message","Date","getTime","privateKey","hashDigest","sha256","hmacDigest","Base64","stringify","hmacSHA512","replace","bind","this","id","Component","MeetStyled","members","socket","connections","peerConnectionConfig","iceServers","urls","Meet","componentDidMount","component","io","Promise","resolve","reject","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","video","width","min","ideal","max","audio","stream","then","localStream","addRemoteVideo","emit","roomId","match","params","roomid","on","querySelector","parentDiv","parentElement","gotMessageFromServer","count","clients","forEach","socketListId","RTCPeerConnection","onicecandidate","event","candidate","console","log","JSON","ice","onaddstream","addStream","createOffer","description","setLocalDescription","sdp","localDescription","catch","e","srcObject","autoplay","muted","playsinline","remoteVideos","span","innerHTML","remoteStrems","fromId","signal","parse","setRemoteDescription","RTCSessionDescription","createAnswer","addIceCandidate","RTCIceCandidate","ref","React","App","basename","path","Boolean","window","location","hostname","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.b30a60bd.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\n\nexport const WrapperStyled = styled.div`\n  max-width: 1312px;\n  margin: auto;\n  padding: 0 1rem;\n  @media (min-width: 1200px) {\n    padding: 0 160px;\n  }\n`;\nfunction Wrapper({ children }) {\n  return <WrapperStyled>{children}</WrapperStyled>;\n}\n\nexport default Wrapper;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nexport const ButtonStyled = styled.button`\n  width: 100%;\n  padding: 1em 1.5em;\n  background: ${props =>\n    props.rounder ? \"none\" : props.success ? \"var(--success)\" : \"var(--main)\"};\n  border-radius: 10px;\n  color: ${props =>\n    props.rounder\n      ? props.success\n        ? \"var(--success)\"\n        : \"var(--main)\"\n      : \"white\"};\n  cursor: pointer;\n  text-align: center;\n  font-size: 0.9em;\n  font-weight: 700;\n  border: ${props =>\n    props.rounder\n      ? props.success\n        ? \"2px solid var(--success)\"\n        : \"2px solid var(--main)\"\n      : \"none\"};\n`;\nfunction Button({ text, rounder, onClick, success }) {\n  return (\n    <ButtonStyled rounder={rounder} onClick={onClick} success={success}>\n      {text}\n    </ButtonStyled>\n  );\n}\n\nexport default Button;\n","const CONFIG = {\n  /*API_URL: process.env.REACT_APP_API_URL,\n  URL: process.env.REACT_APP_URL,\n  SECRET_KEY: process.env.REACT_APP_SECRET_KEY*/\n  API_URL: \"http://157.245.138.14:8081\",\n  URL: \"https://kevinjpuscan.github.io/webrtc-multi-peer\",\n  SECRET_KEY: \"kevin-secret\"\n};\nexport default CONFIG;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport Button from \"../../components/button\";\nimport CONFIG from \"../../config\";\n\nexport const RoomResultStyled = styled.div`\n  background: rgba(0, 0, 0, 0.03);\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  .text-url {\n    width: 100%;\n    box-sizing: border-box;\n    padding: 10px;\n    margin-bottom: 15px;\n  }\n`;\n\nfunction RoomResult({ url }) {\n  let [copied, setCopied] = useState(false);\n  function handleClick() {\n    let text = document.createElement(\"input\");\n    text.setAttribute(\"value\", `${CONFIG.URL + url}`);\n    document.body.appendChild(text);\n    text.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(text);\n    setCopied(true);\n  }\n\n  return (\n    <RoomResultStyled>\n      <input\n        className=\"text-url\"\n        type=\"text\"\n        disabled\n        value={`${CONFIG.URL + url}`}\n      />\n      <Button\n        text={copied ? \"Copiado\" : \"Copiar\"}\n        rounder\n        onClick={handleClick}\n        success={copied}\n      />\n    </RoomResultStyled>\n  );\n}\n\nexport default RoomResult;\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport Wrapper from \"../../components/wrapper\";\nimport Button from \"../../components/button\";\nimport RoomResult from \"./roomResult\";\nimport sha256 from \"crypto-js/sha256\";\nimport hmacSHA512 from \"crypto-js/hmac-sha512\";\nimport Base64 from \"crypto-js/enc-base64\";\nimport CONFIG from \"../../config\";\n\nexport const StartStyled = styled.div`\n  width: 100%;\n  height: 100vh;\n  background: var(--background);\n  margin: 0;\n  padding: 0;\n\n  .container-card {\n    position: absolute;\n    width: 90%;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n    height: ${props => props.heght};\n    margin: auto;\n  }\n  .card {\n    width: 100%;\n    height: 100%;\n    background: white;\n    border-radius: 15px;\n    padding: 50px 30px;\n    box-sizing: border-box;\n    box-shadow: 0px 0px 10px 10px rgba(0, 0, 0, 0.025);\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    margin-bottom: 20px;\n  }\n\n  .title-form {\n    font-size: 1.5em;\n    font-weight: 900;\n    text-align: center;\n    color: var(--gray-black);\n  }\n\n  #description {\n    color: var(--gray);\n    text-align: center;\n    font-weight: 400;\n    font-size: 0.8em;\n  }\n\n  @media (min-width: 1200px) {\n    .card {\n      width: 35%;\n      margin: auto;\n    }\n  }\n`;\n\nclass Start extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      height: \"35%\",\n      created: false,\n      url: \"\"\n    };\n    this.handleClickCreate = this.handleClickCreate.bind(this);\n    this.createHash = this.createHash.bind(this);\n  }\n\n  handleClickCreate = () => {\n    if (this.state.created) {\n      this.props.history.push(this.state.url);\n    }\n    let hash = this.createHash();\n    this.setState({\n      created: true,\n      height: \"60%\",\n      url: `/meet/${hash}`\n    });\n  };\n\n  createHash = () => {\n    const message = new Date().getTime(),\n      nonce = 100,\n      privateKey = CONFIG.SECRET_KEY; // ...\n    const hashDigest = sha256(nonce + message);\n    let hmacDigest = Base64.stringify(hmacSHA512(hashDigest, privateKey));\n    hmacDigest = hmacDigest.replace(/\\//gi, \"k\");\n    return hmacDigest;\n  };\n\n  render() {\n    return (\n      <StartStyled heght={this.state.height}>\n        <Wrapper>\n          <div className=\"container-card\">\n            <div className=\"card\">\n              <div className=\"form-create\">\n                <div className=\"title-form\">Bienvenido</div>\n                <p id=\"description\">\n                  Hola, crea una nueva sala y comparte el link con tus amigos,\n                  as√≠ de simple.\n                </p>\n                <Button\n                  text={this.state.created ? \"Ingresar\" : \"Crear Sala\"}\n                  onClick={this.handleClickCreate}\n                  success={this.state.created}\n                />\n              </div>\n\n              {this.state.created && <RoomResult url={this.state.url} />}\n            </div>\n          </div>\n        </Wrapper>\n      </StartStyled>\n    );\n  }\n}\n\nexport default Start;\n","import React from \"react\";\nimport io from \"socket.io-client\";\nimport { getUserMedia } from \"../../services/userMedia\";\nimport styled from \"styled-components\";\nimport CONFIG from \"../../config\";\n\nexport const MeetStyled = styled.div`\n  margin: 0;\n  padding: 0;\n  width: 100vw;\n  height: 100vh;\n  background: var(--gray-black);\n\n  .content-videos {\n    width: 100%;\n    height: 100%;\n    display: grid;\n    grid-template-rows: ${props =>\n      props.members >= 6\n        ? \"1fr 1fr 1fr\"\n        : props.members >= 2\n        ? \"1fr 1fr\"\n        : \"1fr\"};\n    grid-template-columns: ${props => (props.members >= 3 ? \"1fr 1fr\" : \"1fr\")};\n  }\n\n  .content-videos div {\n    height: 100%;\n    width: 100%;\n    position: relative;\n  }\n\n  .video {\n    background: black;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    top: 0px;\n    left: 0px;\n  }\n\n  @media (min-width: 1200px) {\n    .content-videos {\n      grid-template-rows: ${props => (props.members >= 3 ? \"1fr 1fr\" : \"1fr\")};\n      grid-template-columns: ${props =>\n        props.members >= 6\n          ? \"1fr 1fr 1fr\"\n          : props.members >= 2\n          ? \"1fr 1fr\"\n          : \"1fr\"};\n    }\n  }\n`;\n\nlet socket = null;\nlet connections = [];\nvar peerConnectionConfig = {\n  iceServers: [\n    { urls: \"stun:stun.services.mozilla.com\" },\n    { urls: \"stun:stun.l.google.com:19302\" }\n  ]\n};\n\nclass Meet extends React.Component {\n  constructor(props) {\n    super(props);\n    console.log(\"constructor\");\n    this.state = {\n      localStream: null,\n      remoteStrems: [],\n      members: 0\n    };\n    this.addRemoteVideo = this.addRemoteVideo.bind(this);\n  }\n  componentDidMount = () => {\n    let component = this;\n    socket = io(CONFIG.API_URL);\n    getUserMedia().then(stream => {\n      this.setState({ localStream: stream });\n      this.addRemoteVideo(stream, \"me\");\n\n      socket.emit(\"join\", { roomId: this.props.match.params.roomid });\n    });\n\n    socket.on(\"user-left\", function(id) {\n      var video = document.querySelector('[data-socket=\"' + id + '\"]');\n      if (video) {\n        var parentDiv = video.parentElement;\n        video.parentElement.parentElement.removeChild(parentDiv);\n        component.setState({ members: component.state.members - 1 });\n      }\n    });\n\n    socket.on(\"signal\", this.gotMessageFromServer);\n\n    socket.on(\"user-joined\", function(id, count, clients) {\n      clients.forEach(function(socketListId) {\n        if (!connections[socketListId]) {\n          connections[socketListId] = new RTCPeerConnection(\n            peerConnectionConfig\n          );\n\n          //Wait for their ice candidate\n          connections.onicecandidate = function(event) {\n            if (event.candidate != null) {\n              console.log(\"SENDING ICE\");\n              socket.emit(\n                \"signal\",\n                socketListId,\n                JSON.stringify({ ice: event.candidate })\n              );\n            }\n          };\n\n          //Wait for their video stream\n          connections[socketListId].onaddstream = function(event) {\n            //gotRemoteStream(event, socketListId);\n            component.addRemoteVideo(event.stream, socketListId);\n          };\n\n          //Add the local video stream\n          connections[socketListId].addStream(component.state.localStream);\n        }\n      });\n\n      //Create an offer to connect with your local description\n\n      if (count >= 2 && id !== socket.id) {\n        connections[id].createOffer().then(function(description) {\n          connections[id]\n            .setLocalDescription(description)\n            .then(function() {\n              // console.log(connections);\n              socket.emit(\n                \"signal\",\n                id,\n                JSON.stringify({ sdp: connections[id].localDescription })\n              );\n            })\n            .catch(e => console.log(e));\n        });\n      }\n    });\n  };\n\n  gotMessageFromServer(fromId, message) {\n    //Parse the incoming signal\n    var signal = JSON.parse(message);\n\n    //Make sure it's not coming from yourself\n    if (fromId !== socket.id) {\n      if (signal.sdp) {\n        connections[fromId]\n          .setRemoteDescription(new RTCSessionDescription(signal.sdp))\n          .then(function() {\n            if (signal.sdp.type === \"offer\") {\n              connections[fromId]\n                .createAnswer()\n                .then(function(description) {\n                  connections[fromId]\n                    .setLocalDescription(description)\n                    .then(function() {\n                      socket.emit(\n                        \"signal\",\n                        fromId,\n                        JSON.stringify({\n                          sdp: connections[fromId].localDescription\n                        })\n                      );\n                    })\n                    .catch(e => console.log(e));\n                })\n                .catch(e => console.log(e));\n            }\n          })\n          .catch(e => console.log(e));\n      }\n\n      if (signal.ice) {\n        connections[fromId]\n          .addIceCandidate(new RTCIceCandidate(signal.ice))\n          .catch(e => console.log(e));\n      }\n    }\n  }\n\n  addRemoteVideo = (stream, id) => {\n    if (this.state.members <= 6) {\n      let div = document.createElement(\"div\");\n      let video = document.createElement(\"video\");\n      video.setAttribute(\"data-socket\", id);\n      video.setAttribute(\"class\", \"video\");\n      video.srcObject = stream;\n      video.autoplay = true;\n      video.muted = true;\n      video.playsinline = true;\n      div.appendChild(video);\n      this.remoteVideos.appendChild(div);\n    } else {\n      let div = document.createElement(\"div\");\n      let span = document.createElement(\"span\");\n      span.setAttribute(\"data-socket\", id);\n      span.innerHTML = \"<strong>mas</strong>\";\n      div.appendChild(span);\n      this.remoteVideos.appendChild(div);\n    }\n    this.setState({ members: this.state.members + 1 });\n  };\n\n  render() {\n    console.log(\"remder\");\n    return (\n      <MeetStyled members={this.state.members}>\n        <div\n          className=\"content-videos\"\n          ref={div => (this.remoteVideos = div)}\n        ></div>\n      </MeetStyled>\n    );\n  }\n}\n\nexport default Meet;\n","export const getUserMedia = () => {\n  return new Promise((resolve, reject) => {\n    navigator.getUserMedia = navigator.getUserMedia =\n      navigator.getUserMedia ||\n      navigator.webkitGetUserMedia ||\n      navigator.mozGetUserMedia;\n    const op = {\n      video: {\n        width: { min: 160, ideal: 640, max: 1280 },\n        height: { min: 120, ideal: 360, max: 720 }\n      },\n      audio: true\n    };\n\n    navigator.getUserMedia(\n      op,\n      stream => {\n        resolve(stream);\n      },\n      () => {}\n    );\n  });\n};\n","import React from \"react\";\nimport Start from \"./pages/start\";\nimport Meet from \"./pages/meet\";\nimport \"./App.css\";\nimport { HashRouter, BrowserRouter, Switch, Route } from \"react-router-dom\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <HashRouter basename=\"/\">\n        <BrowserRouter>\n          <Switch>\n            <Route path=\"/meet/:roomid\" component={Meet} />\n            <Route path=\"/\" component={Start} />\n          </Switch>\n        </BrowserRouter>\n      </HashRouter>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}